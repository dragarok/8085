MVI A,80H
OUT 43H
LXI H,8050H
LXI B,0000H
LXI D,0000H

L0: MOV A,M
ANI 01H
JNZ L1
MOV A,C
ADD M
MOV C,A
JNC L2
INR B
JMP L2
L1: MOV A,E
ADD M
MOV E,A
JNC L2
INR D
L2: INX H
MOV A,L
CPI 5AH
JNZ L0

MOV A,C
STA 8070H
OUT 41H
MOV A,B
STA 8071H
OUT 42H
MOV A,D
STA 8060H
OUT 41H
MOV A,E
STA 8061H
OUT 42H
HLT
